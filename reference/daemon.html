<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="Starts up an execution daemon to receive mirai requests. Awaits
    data, evaluates an expression in an environment containing the supplied
    data, and returns the value to the host caller. Daemon settings may be
    controlled by daemons and this function should not need to
    be invoked directly, unless deploying manually on remote resources."><title>Daemon Instance — daemon • mirai</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Source_Sans_Pro-0.4.9/font.css" rel="stylesheet"><link href="../deps/Source_Code_Pro-0.4.9/font.css" rel="stylesheet"><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.11/clipboard.min.js" integrity="sha512-7O5pXpc0oCRrxk8RUfDYFgn0nO1t+jLuIOQdOMRp4APB7uZ4vSjspzp5y6YDtDs4VzUSTbWzBFZ/LKJhnyFOKw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Daemon Instance — daemon"><meta property="og:description" content="Starts up an execution daemon to receive mirai requests. Awaits
    data, evaluates an expression in an environment containing the supplied
    data, and returns the value to the host caller. Daemon settings may be
    controlled by daemons and this function should not need to
    be invoked directly, unless deploying manually on remote resources."><meta property="og:image" content="https://shikokuchuo.net/mirai/logo.png"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light" data-bs-theme="light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">mirai</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.1.1</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item">
  <a class="nav-link" href="../articles/mirai.html">Get started</a>
</li>
<li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/databases.html">mirai - Databases and Arrow</a>
    <a class="dropdown-item" href="../articles/parallel.html">mirai - Parallel Integration</a>
    <a class="dropdown-item" href="../articles/plumber.html">mirai - Plumber Integration</a>
    <a class="dropdown-item" href="../articles/promises.html">mirai - Promises Integration</a>
    <a class="dropdown-item" href="../articles/shiny.html">mirai - Shiny Integration</a>
    <a class="dropdown-item" href="../articles/torch.html">mirai - Torch Integration</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/shikokuchuo/mirai/">
    <span class="fa fa-github"></span>
     
  </a>
</li>
<li class="nav-item">
  <a class="external-link nav-link" href="https://shikokuchuo.net/">
    <span class="fa fa-cube"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Daemon Instance</h1>
      <small class="dont-index">Source: <a href="https://github.com/shikokuchuo/mirai/blob/HEAD/R/daemon.R" class="external-link"><code>R/daemon.R</code></a></small>
      <div class="d-none name"><code>daemon.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Starts up an execution daemon to receive <code><a href="mirai.html">mirai</a></code> requests. Awaits
    data, evaluates an expression in an environment containing the supplied
    data, and returns the value to the host caller. Daemon settings may be
    controlled by <code><a href="daemons.html">daemons</a></code> and this function should not need to
    be invoked directly, unless deploying manually on remote resources.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">daemon</span><span class="op">(</span></span>
<span>  <span class="va">url</span>,</span>
<span>  autoexit <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  cleanup <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  output <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  maxtasks <span class="op">=</span> <span class="cn">Inf</span>,</span>
<span>  idletime <span class="op">=</span> <span class="cn">Inf</span>,</span>
<span>  walltime <span class="op">=</span> <span class="cn">Inf</span>,</span>
<span>  timerstart <span class="op">=</span> <span class="fl">0L</span>,</span>
<span>  <span class="va">...</span>,</span>
<span>  tls <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  rs <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>url</dt>
<dd><p>the character host or dispatcher URL to dial into, including the
port to connect to (and optionally for websockets, a path), e.g.
'tcp://hostname:5555' or 'ws://10.75.32.70:5555/path'.</p></dd>


<dt>autoexit</dt>
<dd><p>[default TRUE] logical value, whether the daemon should
exit automatically when its socket connection ends. If a signal from the
<span class="pkg">tools</span> package, e.g. <code><a href="https://rdrr.io/r/tools/pskill.html" class="external-link">tools::SIGINT</a></code>, or an equivalent integer
value is supplied, this signal is additionally raised (see 'Persistence'
section below).</p></dd>


<dt>cleanup</dt>
<dd><p>[default TRUE] logical value, whether to perform cleanup of
the global environment and restore loaded packages and options to an
initial state after each evaluation. For more granular control, also
accepts an integer value (see ‘Cleanup Options’ section below).</p></dd>


<dt>output</dt>
<dd><p>[default FALSE] logical value, to output generated stdout /
stderr if TRUE, or else discard if FALSE. Specify as TRUE in the
‘...’ argument to <code><a href="daemons.html">daemons</a></code> or
<code><a href="launch_local.html">launch_local</a></code> to provide redirection of output to the host
process (applicable only for local daemons).</p></dd>


<dt>maxtasks</dt>
<dd><p>[default Inf] the maximum number of tasks to execute (task
limit) before exiting.</p></dd>


<dt>idletime</dt>
<dd><p>[default Inf] maximum idle time, since completion of the last
task (in milliseconds) before exiting.</p></dd>


<dt>walltime</dt>
<dd><p>[default Inf] soft walltime, or the minimum amount of real
time taken (in milliseconds) before exiting.</p></dd>


<dt>timerstart</dt>
<dd><p>[default 0L] number of completed tasks after which to start
the timer for ‘idletime’ and ‘walltime’. 0L implies timers
are started upon launch.</p></dd>


<dt>...</dt>
<dd><p>reserved but not currently used.</p></dd>


<dt>tls</dt>
<dd><p>[default NULL] required for secure TLS connections over 'tls+tcp://'
or 'wss://'. <strong>Either</strong> the character path to a file containing
X.509 certificate(s) in PEM format, comprising the certificate authority
certificate chain starting with the TLS certificate and ending with the
CA certificate, <strong>or</strong> a length 2 character vector comprising [i]
the certificate authority certificate chain and [ii] the empty string
<code>''</code>.</p></dd>


<dt>rs</dt>
<dd><p>[default NULL] the initial value of .Random.seed. This is set
automatically using L'Ecuyer-CMRG RNG streams generated by the host
process and should not be independently supplied.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>Invisible NULL.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>The network topology is such that daemons dial into the host or
    dispatcher, which listens at the ‘url’ address. In this way,
    network resources may be added or removed dynamically and the host or
    dispatcher automatically distributes tasks to all available daemons.</p>
    </div>
    <div class="section level2">
    <h2 id="persistence">Persistence<a class="anchor" aria-label="anchor" href="#persistence"></a></h2>
    


<p>The ‘autoexit’ argument governs persistence settings for the
    daemon. The default TRUE ensures that it will exit cleanly once its
    socket connection has ended.</p>
<p>Instead of TRUE, supplying a signal from the <span class="pkg">tools</span> package, e.g.
    <code><a href="https://rdrr.io/r/tools/pskill.html" class="external-link">tools::SIGINT</a></code>, or an equivalent integer value, sets the signal to
    be raised when the socket connection ends. As an example, supplying
    SIGINT allows a potentially more immediate exit by interrupting any
    ongoing evaluation rather than letting it complete.</p>
<p>Setting to FALSE allows the daemon to persist indefinitely even when
    there is no longer a socket connection. This allows a host session to end
    and a new session to connect at the URL where the daemon is dialled in.
    Daemons must be terminated with <code>daemons(NULL)</code> in this case, which
    sends explicit exit instructions to all connected daemons.</p>
<p>Persistence also implies that dials are performed asynchronously, which
    means retries are attempted (indefinitely) if not immediately successful.
    This is resilient behaviour but can mask potential connection issues.</p>
    </div>
    <div class="section level2">
    <h2 id="cleanup-options">Cleanup Options<a class="anchor" aria-label="anchor" href="#cleanup-options"></a></h2>
    


<p>The ‘cleanup’ argument also accepts an integer value, which
    operates an additive bitmask: perform cleanup of the global environment
    (1L), reset loaded packages to an initial state (2L), restore options to
    an initial state (4L), and perform garbage collection (8L).</p>
<p>As an example, to perform cleanup of the global environment and garbage
    collection, specify 9L (1L + 8L). The default argument value of TRUE
    performs all actions apart from garbage collection and is equivalent to a
    value of 7L.</p>
<p>Caution: do not reset options but not loaded packages if packages set
    options on load.</p>
    </div>

  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Charlie Gao.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.</p>
</div>

    </footer></div>

  

  

  </body></html>

